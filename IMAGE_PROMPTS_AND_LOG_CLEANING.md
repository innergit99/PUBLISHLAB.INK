# üé® IMAGE PROMPT LOGIC & AI LOG CLEANING - COMPLETE BREAKDOWN
**System**: Industrial Grade 4.0  
**Date**: 2026-01-23

---

## üì∏ IMAGE GENERATION PROMPTS

### **CURRENT IMPLEMENTATION**

#### **1. CHAPTER IMAGES** (Interior)

**Current Prompt** (Line 556):
```typescript
visualPrompt: `Chapter illustration for "${ch.title}" in ${project.genre} style, 
professional book interior art`
```

**Example Output**:
```
"Chapter illustration for "The Discovery" in Mystery Thriller style, 
professional book interior art"
```

**Then Enhanced By** (Line 1349-1366):
```typescript
if (colorMode === 'B&W') {
  suffix = "black and white ink illustration, high contrast, 
  line art, hatching, professional book illustration, 
  monochrome, 300 DPI, clean lines, no color"
} else {
  suffix = "professional bestseller book cover art,
  CRITICAL: title must be instantly readable at thumbnail size,
  high contrast ratio 7:1 minimum,
  cinematic dramatic lighting,
  genre-accurate visual language,
  300 DPI publishing quality,
  clean title zone in top third,
  focal point clearly defined,
  no cluttered composition"
}
```

**Final Chapter Image Prompt**:
```
"Chapter illustration for "The Discovery" in Mystery Thriller style, 
professional book interior art, black and white ink illustration, 
high contrast, line art, hatching, professional book illustration, 
monochrome, 300 DPI, clean lines, no color"
```

**Status**: ‚ö†Ô∏è **Basic** (could be enhanced with genre-specific details)

---

#### **2. FRONT COVER** (Sales-Driven)

**Prompt Generated By**: `generateSalesDrivenCoverPrompt()` (Lines 1154-1282)

**Example for Mystery Thriller**:
```
Professional Mystery Thriller book cover for "The Lost Hourglass Effect", 
BESTSELLER QUALITY:

MANDATORY ELEMENTS:
- Title "The Lost Hourglass Effect" must be INSTANTLY READABLE at thumbnail size
- Title placement: TOP THIRD with maximum contrast
- Color palette: deep navy blue, blood red accents, black shadows, silver highlights
- Mood: ominous, tense, suspenseful, noir atmosphere, fog and shadows

VISUAL COMPOSITION:
- Focal element: mysterious silhouette, broken mirror, shadowy figure, hidden face, rain-wet streets
- Composition: dark vignette, dramatic lighting, central symbol, clean title space top third
- Typography style: bold sans-serif title, high contrast white or gold text, massive readable letters

TECHNICAL REQUIREMENTS:
- 8K resolution, professional publishing quality
- Clean area for title (no busy patterns behind text)
- High contrast ratio 7:1 minimum for title
- Genre-accurate visual language

STRICTLY AVOID:
- bright colors, happy imagery, cluttered composition, thin fonts
- Text overlapping busy areas
- Clipart or stock photo look
- Amateur composition
- Generic or confused genre signals
```

**Status**: ‚úÖ **SALES-OPTIMIZED** (research-backed genre formulas)

---

#### **3. BACK COVER** (KDP-Compliant)

**Prompt Generated By**: `generateSalesDrivenCoverPrompt()` (Lines 1154-1282)

**Example**:
```
Professional Mystery Thriller book back cover for "The Lost Hourglass Effect":

DESIGN REQUIREMENTS:
- Clean gradient background: deep navy blue transitioning lighter
- NO PHOTOGRAPHS OR COMPLEX IMAGES
- Text-only professional layout
- Clear white barcode zone bottom-right (2" x 1.2")

COMPOSITION:
- Top 60%: Space for blurb text
- Middle 20%: Author bio section
- Bottom 20%: Barcode zone (MUST remain clear)
- Decorative border stopping before barcode area

MOOD: ominous, tense, suspenseful, noir atmosphere but refined for back cover professionalism
AVOID: Any imagery that could interfere with barcode scanning
```

**Status**: ‚úÖ **KDP-COMPLIANT** (text-only, barcode-safe)

---

## ü§ñ AI LOG AUTO-CLEANING SYSTEM

### **AUTOMATIC CLEANING**: ‚úÖ YES!

The `cleanChapterContent()` function runs **AUTOMATICALLY** after every chapter generation.

**Called At** (Lines 1006 & 1028):
```typescript
// PHASE 3: Clean AI artifacts automatically
const cleanedContent = this.cleanChapterContent(rawContent);

// PHASE 4: After Humanity Pro audit
return this.cleanChapterContent(refinedContent);
```

### **What Gets Auto-Removed**:

```typescript
‚úÖ "Chapter 3: The Discovery" (chapter headers)
‚úÖ "INT. POLICE STATION - DAY" (screenplay format)
‚úÖ [stage directions]
‚úÖ "FADE IN", "CUT TO", "FADE OUT"
‚úÖ "ACT ONE", "ACT TWO"
‚úÖ "PROFESSIONAL WRITING REQUIREMENTS:"
‚úÖ "CRITICAL RULES:"
‚úÖ "BEGIN THE CHAPTER NOW"
‚úÖ "Write EXACTLY 3000 words..."
‚úÖ "NO meta-commentary..."
‚úÖ "GENRE STYLE: ..."
‚úÖ "CHAPTER BLUEPRINT"
‚úÖ "Plot Points: ..."
‚úÖ "In conclusion, this chapter demonstrates..."
‚úÖ "This chapter is a great example of..."
‚úÖ **Bold markdown**
‚úÖ "- Opening hook:" "- Scene 2:"
‚úÖ "(3000 words)", "Word count: 3000"
```

### **Additional Auto-Fixes**:

```typescript
‚úÖ Removes triple+ newlines ‚Üí double newlines
‚úÖ Strips leading/trailing whitespace
‚úÖ Finds first actual prose line (capital letter or quote)
‚úÖ Removes everything before story starts
```

### **Example Transformation**:

**AI GENERATED** (before cleaning):
```
CHAPTER 12: THE BREAKTHROUGH

PROFESSIONAL WRITING REQUIREMENTS:
Write EXACTLY 3000 words in Mystery Thriller style.
NO meta-commentary. Begin NOW.

**Opening Hook** (450 words)

Detective James stared at the evidence board...
```

**AUTO-CLEANED** (after processing):
```
Detective James stared at the evidence board...
```

---

## üîÑ DOUBLE-PASS CLEANING SYSTEM

```
RAW AI OUTPUT
    ‚Üì
[cleanChapterContent() - PASS 1]
    ‚Üì
REMOVES: Headers, instructions, meta-text, markdown
    ‚Üì
[Humanity Pro Audit]
    ‚Üì
REMOVES: "meticulously", "delve", "tapestry", AI-speak
    ‚Üì
[cleanChapterContent() - PASS 2]
    ‚Üì
FINAL CLEAN OUTPUT
```

---

## ‚úÖ VERIFICATION SUMMARY

### **Image Prompts**:

| Type | Prompt Quality | Status |
|------|---------------|--------|
| **Chapter Images** | ‚ö†Ô∏è Basic (genre + suffix) | Works but could enhance |
| **Front Cover** | ‚úÖ Sales-Driven (research-backed) | Optimal |
| **Back Cover** | ‚úÖ KDP-Compliant (text-focused) | Optimal |

### **AI Log Cleaning**:

| Question | Answer |
|----------|--------|
| **Auto or Manual?** | ‚úÖ **100% AUTOMATIC** |
| **When Applied?** | After generation + after audit (2x) |
| **What's Removed?** | 15+ patterns (instructions, meta-text, markdown) |
| **User Action Needed?** | ‚ùå **NONE** - completely hands-off |

---

## üí° POTENTIAL ENHANCEMENT

### **Chapter Image Prompts Could Be Enhanced**:

**Current**:
```
"Chapter illustration for "The Discovery" in Mystery Thriller style"
```

**Could Be** (genre-specific like covers):
```
"Chapter illustration for "The Discovery":
Mystery Thriller interior art, noir atmosphere, 
dark shadows, moody lighting, 
subtle clue hidden in scene,
professional book illustration,
[B&W or Color based on project setting]
300 DPI, interior page quality"
```

**Would you like me to implement genre-specific chapter image prompts?**

---

## ‚öôÔ∏è CURRENT WORKFLOW

```
USER: Clicks "Generate Chapter 3"
    ‚Üì
SYSTEM: Generates 3000-word content
    ‚Üì
AUTO: cleanChapterContent() - removes AI logs
    ‚Üì
AUTO: Humanity Pro audit - removes AI-speak
    ‚Üì
AUTO: cleanChapterContent() again - final polish
    ‚Üì
STORED: Clean, publication-ready prose
    ‚Üì
USER: Sees clean content (no manual editing needed)
```

---

**Summary: AI logs are 100% auto-removed. Chapter images use basic prompts (work fine), covers use optimized prompts (sales-driven).** ‚úÖ
